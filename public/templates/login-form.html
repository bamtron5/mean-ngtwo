<div class="container">
    <button (click)="changeForm(true)">Login Form</button>
    <button (click)="changeForm(false)">Sign up Form</button>

    <!-- signupform -->
    <form [hidden]="isLogin" (ngSubmit)="onSubmit('signup')" #signUpForm="ngForm" [ngFormModel]="signUpFormGroup">
        <h3>Sign up</h3>
        <div class="form-group">

            <label for="name">Username</label>
            <input type="text" class="form-control" required [(ngModel)]="model.name" ngControl="name">
            <div *ngIf="name.dirty && !name.valid">
                <div ngClass="alert alert-danger" *ngIf="name.errors.minlength">Username must be longer that 4 characters.</div>
                <div ngClass="alert alert-danger" *ngIf="name.errors.maxlength">Username cannot be longer than 35 characters.</div>
            </div>

            <label for="email">Email</label>
            <input type="email" class="form-control" required [(ngModel)]="model.email" ngControl="emailCtrl" #emailVar="ngForm">
            <div *ngIf="emailCtrl.dirty && !emailCtrl.valid">
                <div ngClass="alert alert-danger" *ngIf="emailCtrl.errors.emailValidator">Must be a valid email.</div>
            </div>
            <div *ngIf="emailCtrl.dirty && emailVar.value !== confirmEmailVar.value">
                <div ngClass="alert alert-danger" *ngIf="emailVar.value !== confirmEmailVar.value">Email fields must match.</div>
            </div>

            <label for="email">Confirm Email</label>
            <input type="email" class="form-control" required ngControl="confirmEmail" #confirmEmailVar="ngForm">
            <div *ngIf="confirmEmail.dirty && !confirmEmail.valid">
                <div ngClass="alert alert-danger" *ngIf="confirmEmail.errors.emailValidator">Must be a valid email.</div>
            </div>
            <div *ngIf="confirmEmail.dirty && emailVar.value !== confirmEmailVar.value">
                <div ngClass="alert alert-danger" *ngIf="emailVar.value !== confirmEmailVar.value">Email fields must match.</div>
            </div>

            <div ngControlGroup="matchingPassword">
                <label for="password">Password</label>
                <input type="password" class="form-control" required [(ngModel)]="model.password" ngControl="password" #passwordVar="ngForm">
                <div *ngIf="password.dirty && !password.valid">
                    <div ngClass="alert alert-danger" *ngIf="password.errors.minlength">Password must be longer that 8 characters.</div>
                    <div ngClass="alert alert-danger" *ngIf="password.errors.maxlength">Password cannot be longer than 35 characters.</div>
                </div>
                <div *ngIf="password.dirty && passwordVar.value !== confirmPasswordVar.value">
                    <div ngClass="alert alert-danger" *ngIf="passwordVar.value !== confirmPasswordVar.value">Password fields must match.</div>
                </div>

                <label for="password">Confirm Password</label>
                <input type="password" class="form-control" required ngControl="confirmPassword" #confirmPasswordVar="ngForm">
                <div *ngIf="confirmPassword.dirty && !confirmPassword.valid">
                    <div ngClass="alert alert-danger" *ngIf="confirmPassword.errors.minlength">Password must be longer that 8 characters.</div>
                    <div ngClass="alert alert-danger" *ngIf="confirmPassword.errors.maxlength">Password cannot be longer than 35 characters.</div>
                </div>
                <div *ngIf="confirmPassword.dirty && passwordVar.value !== confirmPasswordVar.value">
                    <div ngClass="alert alert-danger" *ngIf="passwordVar.value !== confirmPasswordVar.value">Password fields must match.</div>
                </div>
            </div>

        </div>

        <div id="captcha_div">
            <!-- appended by login.form.component on ngViewInit -->
        </div>

        <button ngClass="btn btn-primary" type="submit" [disabled]="!signUpForm.form.valid">Sign up</button>
        <p *ngIf="!acceptedLogin">{{signUpMessage}}</p>
        <p *ngIf="!acceptedLogin && captchaResponse">{{captchaResponse.message}}</p>

    </form>


    <!-- loginform -->
    <form (ngSubmit)="onSubmit('login')" #loginForm="ngForm" [hidden]="!isLogin">
        <h3>Login</h3>
        <div class="form-group">
            <label for="name">User Name</label>
            <input type="text" ngClass="form-control" required [(ngModel)]="model.name" ngControl="name" #name="ngForm">
            <label for="password">Password</label>
            <input type="password" ngClass="form-control" required [(ngModel)]="model.password" ngControl="password" #name="ngForm">
        </div>

        <button type="submit" ngClass="btn btn-primary" [disabled]="!loginForm.form.valid">Login</button>
        <p>{{loginMessage}}</p>
    </form>
</div>